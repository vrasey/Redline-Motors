<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="Source parts directly from Japanese auction sites like Yahoo! Auctions. Paste a link to get a quote from Redline Motors.">

    <meta property="og:title" content="Parts Sourcing & Auctions - Redline Motors">
    <meta property="og:description" content="Source parts directly from Japanese auction sites. Paste a link to get a quote.">
    <meta property="og:image" content="https://vrasey.github.io/Redline-Motors/images/hero_main.jpeg">
    <meta property="og:url" content="https://vrasey.github.io/Redline-Motors/auctions.html">
    <meta property="og:type" content="website">

    <title>Parts Sourcing & Auctions - Redline Motors</title>

    <link rel="icon" type="image/png" href="images/logo_main.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="container">
        <a href="index.html" class="logo">
            <img src="images/logo_main.png" alt="Redline Motors Logo">
            <span class="logo-text">REDLINE<span>MOTORS</span></span>
        </a>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="auctions.html" class="active">Parts</a></li>
                <li><a href="how-to-buy.html">Buy a Car</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </div>
</header>

<main>
    <div class="page-header">
        <div class="container">
            <h1>Parts Sourcing & Auctions</h1>
        </div>
    </div>

    <div class="container page-content">
        
        <div class="parts-instructions">
            <div class="about-section">
                <h2>How It Works</h2>
            </div>
            <ol class="steps-list">
                <li>
                    <h3>Step 1: Find Your Part</h3>
                    <p>Locate the item you wish to purchase on any Japanese auction or retail site (like Yahoo! Auctions, Up Garage, etc.). Copy the full URL from your browser's address bar.</p>
                </li>
                <li>
                    <h3>Step 2: Get a Quote</h3>
                    <p>Paste the link into the form below. We will review the item and send you a complete, all-inclusive quote covering the item cost, our service fee, and your shipping address.</p>
                    <a href="#quote-form" class="btn btn-primary">Go to Quote Form</a>
                </li>
                <li>
                    <h3>Step 3: Payment</h3>
                    <p>Once you approve the quote, we will send you an final shipping invoice*. After payment is confirmed, then we will secure the item on your behalf.</p>
                </li>
                <li>
                    <h3>Step 4: Shipping & Delivery</h3>
                    <p>We handle all domestic logistics within Japan, package your item securely, and manage international shipping. You will receive the tracking info via text or email as soon as it's available.</p>
                </li>
            </ol>
        </div>

        <div class="parts-form" id="quote-form">
            <div class="about-section">
                <h2>Request a Quote</h2>
            </div>
            <div class="form-container">
                <form action="https://formspree.io/f/xeorgbkz" method="POST">
                    <label for="name">Your Name</label>
                    <input type="text" id="name" name="name" required>

                    <label for="email">Your Email</label>
                    <input type="email" id="email" name="email" required>

                    <div id="auction-links-container">
                        <div class="link-item">
                            <label for="auction-link-1">Auction Link #1</label>
                            <input type="url" id="auction-link-1" name="auction-link-1" placeholder="https://auctions.yahoo.co.jp/..." required>
                        </div>
                    </div>

                    <button type="button" id="add-link-btn" class="btn btn-secondary">+ Add another item</button>

                    <label for="max-bid">Your Max Bid (USD)</label>
                    <input type="number" id="max-bid" name="max-bid" placeholder="e.g., 150" min="0" required>
                    
                    <div id="scrape-preview-container"></div>

                    <button type="button" id="get-quote-btn" class="btn btn-primary">Get a Quote</button>
                </form>

                <p class="form-notice">Please note: Shipping costs are often not listed on the auction page itself. We will calculate and include all shipping costs in the final quote we send you.</p>
            </div>
            
            <div class="currency-converter">
                <h3>Currency Converter</h3>
                <div class="converter-row">
                    <div class="input-group">
                        <div class="label-with-select">
                            <label for="from-input">From</label>
                            <select id="currency-select">
                                <option value="USD" selected>USD</option>
                                <option value="AUD">AUD</option>
                            </select>
                        </div>
                        <input type="number" id="from-input" placeholder="100" min="0">
                    </div>
                    <div class="equals-sign">=</div>
                    <div class="input-group">
                        <label for="jpy-input">JPY</label>
                        <input type="number" id="jpy-input" placeholder="----" min="0">
                    </div>
                </div>
                <small class="rate-info">Fetching live exchange rate...</small>
            </div>
        </div>
    </div>
</main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Redline Motors. All Rights Reserved. Based in Tokyo, Japan.</p>
        </div>
    </footer>

    <a href="https://m.me/820619511130834" class="messenger-button" target="_blank" aria-label="Chat on Messenger">
        <i class="fab fa-facebook-messenger"></i>
    </a>
    
<script>
    // --- CURRENCY CONVERTER SCRIPT ---
    // (This script remains the same)
</script>

<script>
    // --- DYNAMIC FORM FIELDS SCRIPT ---
    // (This script remains the same)
</script>

<script>
    const backendUrl = 'YOUR_AZURE_URL_HERE'; // <-- PASTE YOUR URL WITH HTTPS://
    const quoteBtn = document.getElementById('get-quote-btn');
    const auctionLinkInput = document.getElementById('auction-link-1');
    const previewContainer = document.getElementById('scrape-preview-container');

    quoteBtn.addEventListener('click', async () => {
        const urlToScrape = auctionLinkInput.value;
        if (!urlToScrape) {
            alert('Please provide at least one auction link.');
            return;
        }

        previewContainer.innerHTML = '<p class="loading-text">Fetching details from auction...</p>';
        previewContainer.style.display = 'block';

        try {
            const response = await fetch(`${backendUrl}/scrape`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: urlToScrape }),
            });

            if (!response.ok) {
                throw new Error('Server responded with an error.');
            }

            const data = await response.json();

            // Build the HTML for the preview using data from the Python script
            const previewHtml = `
                <div class="scrape-preview">
                    <div class="preview-details">
                        <h4>${data.name}</h4>
                        <p class="price">Current Price: ${data.price}</p>
                        <p class="price">Buy Now Price: ${data.endprice}</p>
                        <p class="end-time">Ends: ${data.end_time}</p>
                    </div>
                </div>
            `;
            
            previewContainer.innerHTML = previewHtml;

        } catch (error) {
            console.error('Scraping failed:', error);
            previewContainer.innerHTML = '<p class="error-text">Could not fetch details. Please check the link and try again.</p>';
        }
    });
</script>

</body>
</html>